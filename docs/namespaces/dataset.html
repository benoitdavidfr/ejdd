<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>Documentation</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category -namespaces">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/algebra.html" class="">Algebra</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/dataset.html" class="-active">Dataset</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/drawing.html" class="">Drawing</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/llmap.html" class="">LLMap</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/main.html" class="">Main</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/geojson.html" class="">GeoJSON</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/bbox.html" class="">BBox</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/bbox-pbtype.html" class="">PbType</a>
                
            </li>
                    <li>
                <a href="namespaces/bbox-tbox.html" class="">TBox</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/pos.html" class="">Pos</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/zoomlevel.html" class="">ZoomLevel</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/lib.html" class="">Lib</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/misc.html" class="">Misc</a>
</h4>

                        </section>
                <section class="phpdocumentor-sidebar__category -packages">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Algebra.html" class="">Algebra</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Application.html" class="">Application</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Misc.html" class="">Misc</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Dataset.html" class="">Dataset</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Drawing.html" class="">Drawing</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Map.html" class="">Map</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Main.html" class="">Main</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/GeoJSON.html" class="">GeoJSON</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/BBox.html" class="">BBox</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="packages/BBox-PbType.html" class="">PbType</a>
                
            </li>
                    <li>
                <a href="packages/BBox-TBox.html" class="">TBox</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Pos.html" class="">Pos</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/ZoomLevel.html" class="">ZoomLevel</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/Lib.html" class="">Lib</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category -reports">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category -indices">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                <section>
                                        <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -namespace">
        <h2 class="phpdocumentor-content__title">Dataset</h2>

        
<h3 id="toc">
    Table of Contents
    <a href="namespaces/dataset.html#toc" class="headerlink"><i class="fas fa-link"></i></a>

</h3>




    <h4 id="toc-classes">
        Classes
        <a href="namespaces/dataset.html#toc-classes" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>
    <dl class="phpdocumentor-table-of-contents">
                    <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-AeCogPe.html"><abbr title="\Dataset\AeCogPe">AeCogPe</abbr></a></dt><dd>JdD Admin Express COG Carto petite échelle 2025 de l&#039;IGN (AeCogPe).</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-AeCogPeBuild.html"><abbr title="\Dataset\AeCogPeBuild">AeCogPeBuild</abbr></a></dt><dd>Construction du JdD AeCogPe.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-Dataset.html"><abbr title="\Dataset\Dataset">Dataset</abbr></a></dt><dd>Classe abstraite des JdD.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DatasetTest.html"><abbr title="\Dataset\DatasetTest">DatasetTest</abbr></a></dt><dd>Test de Dataset.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DebugScripts.html"><abbr title="\Dataset\DebugScripts">DebugScripts</abbr></a></dt><dd>JdD destiné à debugger les scripts notamment sur les schemas et l&#039;affichage.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DeptReg.html"><abbr title="\Dataset\DeptReg">DeptReg</abbr></a></dt><dd>JdD des données des départements et régions.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DeptRegBuild.html"><abbr title="\Dataset\DeptRegBuild">DeptRegBuild</abbr></a></dt><dd>Construction du JdD DeptReg.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-Extract.html"><abbr title="\Dataset\Extract">Extract</abbr></a></dt><dd>Catégorie de jeux de données définis comme une agrégation de collections définies dans d&#039;autres jeux.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-ExtractBuild.html"><abbr title="\Dataset\ExtractBuild">ExtractBuild</abbr></a></dt><dd>Construction d&#039;Extract.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-GeoDataset.html"><abbr title="\Dataset\GeoDataset">GeoDataset</abbr></a></dt><dd>JdD géographique générique, utilisé pour les JdD Nartural Earth</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-GeoDatasetBuild.html"><abbr title="\Dataset\GeoDatasetBuild">GeoDatasetBuild</abbr></a></dt><dd>Construit un GeoDataset.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-InseeCog.html"><abbr title="\Dataset\InseeCog">InseeCog</abbr></a></dt><dd>JdD Code officiel géographique au 1er janvier 2025 (Insee) (InseeCog).</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-InseeCogBuild.html"><abbr title="\Dataset\InseeCogBuild">InseeCogBuild</abbr></a></dt><dd>Construction d&#039;InseeCog.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-MapDataset.html"><abbr title="\Dataset\MapDataset">MapDataset</abbr></a></dt><dd>JdD des cartes dessinables en Leaflet sans avoir à éditer le code JS correspondant.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-NomsCnig.html"><abbr title="\Dataset\NomsCnig">NomsCnig</abbr></a></dt><dd>JdD des Noms des collectivités territoriales françaises définis par la Commission Nationale de Toponymie du CNIG (NomsCnig).</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-NomsCnigBuild.html"><abbr title="\Dataset\NomsCnigBuild">NomsCnigBuild</abbr></a></dt><dd>Construit NomsCnig.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-NomsCtCnigC.html"><abbr title="\Dataset\NomsCtCnigC">NomsCtCnigC</abbr></a></dt><dd>JdD  des noms des CT définis par le CNIG (NomsCtCnigC) stockées dans un fichier ODS.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-Pays.html"><abbr title="\Dataset\Pays">Pays</abbr></a></dt><dd>JdD des Pays fondé sur l&#039;utilisation de spreadsheetdataset.inc.php</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DocProperty.html"><abbr title="\Dataset\DocProperty">DocProperty</abbr></a></dt><dd>Feuille de documentation d&#039;un fichier ODS.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-DocCollection.html"><abbr title="\Dataset\DocCollection">DocCollection</abbr></a></dt><dd>Feuille d&#039;une Collection d&#039;un fichier ODS.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-SpreadSheetDataset.html"><abbr title="\Dataset\SpreadSheetDataset">SpreadSheetDataset</abbr></a></dt><dd>Lecture et interprétation de la feuille de doc du classeur</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-PaysTest.html"><abbr title="\Dataset\PaysTest">PaysTest</abbr></a></dt><dd>Classe de test de l&#039;extension de SpreadSheetDataset.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-Styler.html"><abbr title="\Dataset\Styler">Styler</abbr></a></dt><dd>Catégorie de JdD Styler permettant de styler des features.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-StylerBuild.html"><abbr title="\Dataset\StylerBuild">StylerBuild</abbr></a></dt><dd>Construction de Styler.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsCache.html"><abbr title="\Dataset\WfsCache">WfsCache</abbr></a></dt><dd>Gère un cache des appels Http GET pour Wfs.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsOutputFormat.html"><abbr title="\Dataset\WfsOutputFormat">WfsOutputFormat</abbr></a></dt><dd>Choix du paramètre outputFormat pour les requêtes WFS GetFeature.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsCap.html"><abbr title="\Dataset\WfsCap">WfsCap</abbr></a></dt><dd>Exploite le XML des capacités d&#039;un serveur WFS pour en déduire différentes infos dont le schéma JSON du JdD.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsProperties.html"><abbr title="\Dataset\WfsProperties">WfsProperties</abbr></a></dt><dd>Exploite le XML issu d&#039;une requête describeFeatureType pour en déduire les propriétés de schema JSON.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsRequestLight.html"><abbr title="\Dataset\WfsRequestLight">WfsRequestLight</abbr></a></dt><dd>Un WfsRequesXXX exécute les requêtes GET au serveur ; WfsRequestLight permet d&#039;exécuter uniquement la requête GetCapabilities.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsRequestFull.html"><abbr title="\Dataset\WfsRequestFull">WfsRequestFull</abbr></a></dt><dd>Un WfsRequestFull est complété par des infos issues du GetCapabilities pour exécuter les autres requêtes.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-Wfs.html"><abbr title="\Dataset\Wfs">Wfs</abbr></a></dt><dd>Gabarit de JdD ayant pour collections les FeatureTypes d&#039;un serveur WFS.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsBuild.html"><abbr title="\Dataset\WfsBuild">WfsBuild</abbr></a></dt><dd>Test de Wfs.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsNs.html"><abbr title="\Dataset\WfsNs">WfsNs</abbr></a></dt><dd>Gabarit de Jeu de données ayant pour collections les FeatureTypes d&#039;un espace de noms d&#039;un serveur WFS.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WfsNsBuild.html"><abbr title="\Dataset\WfsNsBuild">WfsNsBuild</abbr></a></dt><dd>Test de WfsNs.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WorldEez.html"><abbr title="\Dataset\WorldEez">WorldEez</abbr></a></dt><dd>Jeu de données WorldEez des ZEE mondiales.</dd>            <dt class="phpdocumentor-table-of-contents__entry -class"><a href="classes/Dataset-WorldEezBuild.html"><abbr title="\Dataset\WorldEezBuild">WorldEezBuild</abbr></a></dt><dd>Constructeur de WorldEez.</dd>    </dl>



<h4 id="toc-constants">
    Constants
    <a href="namespaces/dataset.html#toc-constants" class="headerlink"><i class="fas fa-link"></i></a>

</h4>
<dl class="phpdocumentor-table-of-contents">
            <dt class="phpdocumentor-table-of-contents__entry -constant -public">
    <a class="" href="namespaces/dataset.html#constant_A_FAIRE_WFS">A_FAIRE_WFS</a>
    <span>
        &nbsp;= [&lt;&lt;&lt;&#039;EOT&#039;
Actions à réaliser:
  - essayer d&#039;implémenter le filtre &#039;predicate&#039; sur Wfs::getItems() en utilisant CqlV1.
  - quand je récupère du GML, je pourrais ne pas imposer de srs et demander à ogr2ogr de faire la conversion de srs
EOT]                            </span>
</dt>
<dd>Actions à réaliser.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -constant -public">
    <a class="" href="namespaces/dataset.html#constant_BUG_WFS">BUG_WFS</a>
    <span>
        &nbsp;= [&lt;&lt;&lt;&#039;EOT&#039;
Pour effectuer les tests:
  IgnWfs:          Wfs 2.0.0 aGeoJSON
  BDTopage2025:    WfsNsUrl 2.0.0 aGeoJSON
  SextantBiologie: WfsNsUrl 2.0.0 ssGeoJSON
  SextantDCE:      WfsNsUrl 1.1.0 SsNs aGeoJSON
  SextantEnvMarin: Wfs 1.1.0 SsNs aGeoJSON
  GéoLittoral:     WfsNsUrl 2.0.0 ssGeoJSON

Tests à effectuer:
  - properties
  - getFeaturesOnBBox
  - skip
EOT]                            </span>
</dt>

            <dt class="phpdocumentor-table-of-contents__entry -constant -public">
    <a class="" href="namespaces/dataset.html#constant_NOTE_ESPACES_DE_NOMS_WFS">NOTE_ESPACES_DE_NOMS_WFS</a>
    <span>
        &nbsp;= [&lt;&lt;&lt;&#039;EOT&#039;
L&#039;utilisation d&#039;espaces de noms XML avec SimpleXML est compliquée car son affichage ne permet pas de visualiser les sous-éléments
dans les différents espaces.
Par ailleurs, les espaces sont différents en WFS 1.1.0 et en WFS 2.0.0.
J&#039;utilise donc un contournement un peu approximatif.
Dans le XML, soit je remplace les &#039;:&#039; séparant le préfixe par &#039;__&#039;, soit je supprime ces préfixes.
Cette 2ème solution ne fonctionne pas quand il existe des attributs utilisant un espace de nom comme &#039;xlink:href&#039;.

Cette transformation et ce décodage XML sont cantonnés dans les classes:
  - WfsCap qui analyse les capacités fournies en XML
  - WfsProperties qui analyse le XML issu de DescribeFeatureType et qui est utilisé par WfsNs.

Je pourrais utiliser des XPath avec SimpleXml, ce qui serait plus fiable.

EOT]                            </span>
</dt>

            <dt class="phpdocumentor-table-of-contents__entry -constant -public">
    <a class="" href="namespaces/dataset.html#constant_NOTE_QUERY_LANGUAGE_WFS">NOTE_QUERY_LANGUAGE_WFS</a>
    <span>
        &nbsp;= [&lt;&lt;&lt;&#039;EOT&#039;
Différents langages de requêtes peuvent être utilisés pour interroger un serveur WFS:
  - &quot;OpenGIS Filter Encoding 2.0 Encoding Standard&quot;, OGC 09-026r1 and ISO 19143:2010
  - &quot;Filter Encoding Implementation Specification&quot;, Version: 1.0.0, OGC 02-059, 17-MAY-2001
  - &quot;OGC® Filter Encoding 2.0 Encoding Standard&quot;, version 2.0.3, OGC 09-026r2, 2014-08-18
  - &quot;OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)&quot;, Draft, https://portal.ogc.org/files/96288, 2020,
    correspondant à CQL2
  - &quot;OpenGIS® Catalogue Services Specification 2.0.2 - ISO Metadata Application Profile: Corrigendum&quot; (OGC 07-045r1)
    contient le passage suivant sur CQL:
      The interoperability goal is supported by the specification of a minimal abstract query (predicate) language, which must be supported by
      all compliant OGC Catalogue Services. This query language is called OGC_Common Catalogue Query Language (CQL) (see [OGC 07-006]). 
      It supports nested Boolean queries, text matching operations, temporal data types, and geospatial operators. CQL assists the consumer 
      in the discovery of datasets of interest at all sites supporting the OGC Catalogue Services.
      OGC Filter Encoding is an XML based encoding of the OGC_Common Query Language. This query language (Version 1.1.0) must be supported 
      by all catalogue instances of this profile in order to support search interoperability. In addition, the plain textual encoding of CQL 
      version 2.0 may be supported. The capabilities document of the catalogue instance shall describe all supported query languages 
      (see Capabilities Document in Annex E) .
  - https://docs.geoserver.org/2.23.x/en/user/tutorials/cql/cql_tutorial.html
  - j&#039;ai trouvé OGC 07-006 qui contient une BNF de CQLv1.

CQLv1 a été repris par CQLv2 dans OGC API Features mais semble uniquement un draft.
J&#039;ai utilisé dans Wfs CQL v1 car je n&#039;ai pas réussi à utiliser Filter Encoding.

Wfs accepte les prédicats dans getItems() mais certains prédicats ne sont pas compatibles avec CQL v1 et leur traduction génère une exception.

EOT]                            </span>
</dt>

            <dt class="phpdocumentor-table-of-contents__entry -constant -public">
    <a class="" href="namespaces/dataset.html#constant_NOTE_SRS_WFS">NOTE_SRS_WFS</a>
    <span>
        &nbsp;= [&lt;&lt;&lt;&#039;EOT&#039;
La définition des identifiants pour les srs est particulièrement chaotique.
Le SRS est nécessaire à 2 endroits:
  1) dans la requête GetFeature pour indiquer dans quel SRS la géométrie est demandée
     il est cependant possible que le format GeoJSON impose un SRS CRS:84
     et par ailleurs qd on récupère du GML la conversion en GeoJSON peut gérer la conversion des coordonnées
  2) en &quot;5° coordonnée&quot; dans le bbox passé dans GetFeature
ChatGPT indiquait que de nombreux serveurs sont mal configurés et exposent des SRS incorrects, cela me semble faux.
EOT]                            </span>
</dt>

    </dl>





        
    <section class="phpdocumentor-constants">
        <h3 class="phpdocumentor-elements__header" id="constants">
            Constants
            <a href="namespaces/dataset.html#constants" class="headerlink"><i class="fas fa-link"></i></a>

        </h3>
                    <article class="phpdocumentor-element -constant -public ">
    <h4 class="phpdocumentor-element__name" id="constant_A_FAIRE_WFS">
        A_FAIRE_WFS
        <a href="namespaces/dataset.html#constant_A_FAIRE_WFS" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>

    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="datasets/wfs.php"><a href="files/datasets-wfs.html"><abbr title="datasets/wfs.php">wfs.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">11</span>

    </aside>

        <p class="phpdocumentor-summary">Actions à réaliser.</p>

    
    <code class="phpdocumentor-signature phpdocumentor-code ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">A_FAIRE_WFS</span>
    = <span class="phpdocumentor-signature__default-value">[&lt;&lt;&lt;&#039;EOT&#039;
Actions à réaliser:
  - essayer d&#039;implémenter le filtre &#039;predicate&#039; sur Wfs::getItems() en utilisant CqlV1.
  - quand je récupère du GML, je pourrais ne pas imposer de srs et demander à ogr2ogr de faire la conversion de srs
EOT]</span>
</code>


    
    
    

    

</article>
                    <article class="phpdocumentor-element -constant -public ">
    <h4 class="phpdocumentor-element__name" id="constant_BUG_WFS">
        BUG_WFS
        <a href="namespaces/dataset.html#constant_BUG_WFS" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>

    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="datasets/wfs.php"><a href="files/datasets-wfs.html"><abbr title="datasets/wfs.php">wfs.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">19</span>

    </aside>

    
    
    <code class="phpdocumentor-signature phpdocumentor-code ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">BUG_WFS</span>
    = <span class="phpdocumentor-signature__default-value">[&lt;&lt;&lt;&#039;EOT&#039;
Pour effectuer les tests:
  IgnWfs:          Wfs 2.0.0 aGeoJSON
  BDTopage2025:    WfsNsUrl 2.0.0 aGeoJSON
  SextantBiologie: WfsNsUrl 2.0.0 ssGeoJSON
  SextantDCE:      WfsNsUrl 1.1.0 SsNs aGeoJSON
  SextantEnvMarin: Wfs 1.1.0 SsNs aGeoJSON
  GéoLittoral:     WfsNsUrl 2.0.0 ssGeoJSON

Tests à effectuer:
  - properties
  - getFeaturesOnBBox
  - skip
EOT]</span>
</code>


    
    
    

    

</article>
                    <article class="phpdocumentor-element -constant -public ">
    <h4 class="phpdocumentor-element__name" id="constant_NOTE_ESPACES_DE_NOMS_WFS">
        NOTE_ESPACES_DE_NOMS_WFS
        <a href="namespaces/dataset.html#constant_NOTE_ESPACES_DE_NOMS_WFS" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>

    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="datasets/wfs.php"><a href="files/datasets-wfs.html"><abbr title="datasets/wfs.php">wfs.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">36</span>

    </aside>

    
    
    <code class="phpdocumentor-signature phpdocumentor-code ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">NOTE_ESPACES_DE_NOMS_WFS</span>
    = <span class="phpdocumentor-signature__default-value">[&lt;&lt;&lt;&#039;EOT&#039;
L&#039;utilisation d&#039;espaces de noms XML avec SimpleXML est compliquée car son affichage ne permet pas de visualiser les sous-éléments
dans les différents espaces.
Par ailleurs, les espaces sont différents en WFS 1.1.0 et en WFS 2.0.0.
J&#039;utilise donc un contournement un peu approximatif.
Dans le XML, soit je remplace les &#039;:&#039; séparant le préfixe par &#039;__&#039;, soit je supprime ces préfixes.
Cette 2ème solution ne fonctionne pas quand il existe des attributs utilisant un espace de nom comme &#039;xlink:href&#039;.

Cette transformation et ce décodage XML sont cantonnés dans les classes:
  - WfsCap qui analyse les capacités fournies en XML
  - WfsProperties qui analyse le XML issu de DescribeFeatureType et qui est utilisé par WfsNs.

Je pourrais utiliser des XPath avec SimpleXml, ce qui serait plus fiable.

EOT]</span>
</code>


    
    
    

    

</article>
                    <article class="phpdocumentor-element -constant -public ">
    <h4 class="phpdocumentor-element__name" id="constant_NOTE_QUERY_LANGUAGE_WFS">
        NOTE_QUERY_LANGUAGE_WFS
        <a href="namespaces/dataset.html#constant_NOTE_QUERY_LANGUAGE_WFS" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>

    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="datasets/wfs.php"><a href="files/datasets-wfs.html"><abbr title="datasets/wfs.php">wfs.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">66</span>

    </aside>

    
    
    <code class="phpdocumentor-signature phpdocumentor-code ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">NOTE_QUERY_LANGUAGE_WFS</span>
    = <span class="phpdocumentor-signature__default-value">[&lt;&lt;&lt;&#039;EOT&#039;
Différents langages de requêtes peuvent être utilisés pour interroger un serveur WFS:
  - &quot;OpenGIS Filter Encoding 2.0 Encoding Standard&quot;, OGC 09-026r1 and ISO 19143:2010
  - &quot;Filter Encoding Implementation Specification&quot;, Version: 1.0.0, OGC 02-059, 17-MAY-2001
  - &quot;OGC® Filter Encoding 2.0 Encoding Standard&quot;, version 2.0.3, OGC 09-026r2, 2014-08-18
  - &quot;OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)&quot;, Draft, https://portal.ogc.org/files/96288, 2020,
    correspondant à CQL2
  - &quot;OpenGIS® Catalogue Services Specification 2.0.2 - ISO Metadata Application Profile: Corrigendum&quot; (OGC 07-045r1)
    contient le passage suivant sur CQL:
      The interoperability goal is supported by the specification of a minimal abstract query (predicate) language, which must be supported by
      all compliant OGC Catalogue Services. This query language is called OGC_Common Catalogue Query Language (CQL) (see [OGC 07-006]). 
      It supports nested Boolean queries, text matching operations, temporal data types, and geospatial operators. CQL assists the consumer 
      in the discovery of datasets of interest at all sites supporting the OGC Catalogue Services.
      OGC Filter Encoding is an XML based encoding of the OGC_Common Query Language. This query language (Version 1.1.0) must be supported 
      by all catalogue instances of this profile in order to support search interoperability. In addition, the plain textual encoding of CQL 
      version 2.0 may be supported. The capabilities document of the catalogue instance shall describe all supported query languages 
      (see Capabilities Document in Annex E) .
  - https://docs.geoserver.org/2.23.x/en/user/tutorials/cql/cql_tutorial.html
  - j&#039;ai trouvé OGC 07-006 qui contient une BNF de CQLv1.

CQLv1 a été repris par CQLv2 dans OGC API Features mais semble uniquement un draft.
J&#039;ai utilisé dans Wfs CQL v1 car je n&#039;ai pas réussi à utiliser Filter Encoding.

Wfs accepte les prédicats dans getItems() mais certains prédicats ne sont pas compatibles avec CQL v1 et leur traduction génère une exception.

EOT]</span>
</code>


    
    
    

    

</article>
                    <article class="phpdocumentor-element -constant -public ">
    <h4 class="phpdocumentor-element__name" id="constant_NOTE_SRS_WFS">
        NOTE_SRS_WFS
        <a href="namespaces/dataset.html#constant_NOTE_SRS_WFS" class="headerlink"><i class="fas fa-link"></i></a>

    </h4>

    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="datasets/wfs.php"><a href="files/datasets-wfs.html"><abbr title="datasets/wfs.php">wfs.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">54</span>

    </aside>

    
    
    <code class="phpdocumentor-signature phpdocumentor-code ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">NOTE_SRS_WFS</span>
    = <span class="phpdocumentor-signature__default-value">[&lt;&lt;&lt;&#039;EOT&#039;
La définition des identifiants pour les srs est particulièrement chaotique.
Le SRS est nécessaire à 2 endroits:
  1) dans la requête GetFeature pour indiquer dans quel SRS la géométrie est demandée
     il est cependant possible que le format GeoJSON impose un SRS CRS:84
     et par ailleurs qd on récupère du GML la conversion en GeoJSON peut gérer la conversion des coordonnées
  2) en &quot;5° coordonnée&quot; dans le bbox passé dans GetFeature
ChatGPT indiquait que de nombreux serveurs sont mal configurés et exposent des SRS incorrects, cela me semble faux.
EOT]</span>
</code>


    
    
    

    

</article>
            </section>

        
        <div class="phpdocumentor-modal" id="source-view">
    <div class="phpdocumentor-modal-bg" data-exit-button></div>
    <div class="phpdocumentor-modal-container">
        <div class="phpdocumentor-modal-content">
            <pre style="max-height: 500px; overflow-y: scroll" data-src="" class="language-php line-numbers linkable-line-numbers"></pre>
        </div>
        <button data-exit-button class="phpdocumentor-modal__close">&times;</button>
    </div>
</div>

    <script type="text/javascript">
        (function () {
            function loadExternalCodeSnippet(el, url, line) {
                Array.prototype.slice.call(el.querySelectorAll('pre[data-src]')).forEach((pre) => {
                    const src = url || pre.getAttribute('data-src').replace(/\\/g, '/');
                    const language = 'php';

                    const code = document.createElement('code');
                    code.className = 'language-' + language;
                    pre.textContent = '';
                    pre.setAttribute('data-line', line)
                    code.textContent = 'Loading…';
                    pre.appendChild(code);

                    var xhr = new XMLHttpRequest();

                    xhr.open('GET', src, true);

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState !== 4) {
                            return;
                        }

                        if (xhr.status < 400 && xhr.responseText) {
                            code.textContent = xhr.responseText;
                            Prism.highlightElement(code);
                            d=document.getElementsByClassName("line-numbers");
                            d[0].scrollTop = d[0].children[1].offsetTop;
                            return;
                        }

                        if (xhr.status === 404) {
                            code.textContent = '✖ Error: File could not be found';
                            return;
                        }

                        if (xhr.status >= 400) {
                            code.textContent = '✖ Error ' + xhr.status + ' while fetching file: ' + xhr.statusText;
                            return;
                        }

                        code.textContent = '✖ Error: An unknown error occurred';
                    };

                    xhr.send(null);
                });
            }

            const modalButtons = document.querySelectorAll("[data-modal]");
            const openedAsLocalFile = window.location.protocol === 'file:';
            if (modalButtons.length > 0 && openedAsLocalFile) {
                console.warn(
                    'Viewing the source code is unavailable because you are opening this page from the file:// scheme; ' +
                    'browsers block XHR requests when a page is opened this way'
                );
            }

            modalButtons.forEach(function (trigger) {
                if (openedAsLocalFile) {
                    trigger.setAttribute("hidden", "hidden");
                }

                trigger.addEventListener("click", function (event) {
                    event.preventDefault();
                    const modal = document.getElementById(trigger.dataset.modal);
                    if (!modal) {
                        console.error(`Modal with id "${trigger.dataset.modal}" could not be found`);
                        return;
                    }
                    modal.classList.add("phpdocumentor-modal__open");

                    loadExternalCodeSnippet(modal, trigger.dataset.src || null, trigger.dataset.line)
                    const exits = modal.querySelectorAll("[data-exit-button]");
                    exits.forEach(function (exit) {
                        exit.addEventListener("click", function (event) {
                            event.preventDefault();
                            modal.classList.remove("phpdocumentor-modal__open");
                        });
                    });
                });
            });
        })();
    </script>

    </article>
                                </section>
                <section class="phpdocumentor-on-this-page__sidebar">
                            
    <section class="phpdocumentor-on-this-page__content">
        <strong class="phpdocumentor-on-this-page__title">On this page</strong>

        <ul class="phpdocumentor-list -clean">
            <li class="phpdocumentor-on-this-page-section__title">Table Of Contents</li>
            <li>
                <ul class="phpdocumentor-list -clean">
                                                                                                    <li><a href="namespaces/dataset.html#toc-classes">Classes</a></li>
                                                                                                    <li><a href="namespaces/dataset.html#toc-constants">Constants</a></li>
                                                        </ul>
            </li>

                            <li class="phpdocumentor-on-this-page-section__title">Constants</li>
                <li>
                    <ul class="phpdocumentor-list -clean">
                                                    <li class=""><a href="namespaces/dataset.html#constant_A_FAIRE_WFS">A_FAIRE_WFS</a></li>
                                                    <li class=""><a href="namespaces/dataset.html#constant_BUG_WFS">BUG_WFS</a></li>
                                                    <li class=""><a href="namespaces/dataset.html#constant_NOTE_ESPACES_DE_NOMS_WFS">NOTE_ESPACES_DE_NOMS_WFS</a></li>
                                                    <li class=""><a href="namespaces/dataset.html#constant_NOTE_QUERY_LANGUAGE_WFS">NOTE_QUERY_LANGUAGE_WFS</a></li>
                                                    <li class=""><a href="namespaces/dataset.html#constant_NOTE_SRS_WFS">NOTE_SRS_WFS</a></li>
                                            </ul>
                </li>
            
                    </ul>
    </section>

                </section>
                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="namespaces/dataset.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
